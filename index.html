<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Wireless Simulation Tools for IMT and ITU-R related - Sendil Devar">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Wireless Tools by Sendil Devar</title>
    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <!-- <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.indigo-pink.min.css"> -->
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="css/mystyle.css">
    <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link href='//fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>


    <link rel="stylesheet" type="text/css"
        href="https://cdn.jsdelivr.net/npm/@observablehq/inspector@3/dist/inspector.css">
    <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <!-- <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/skeleton.css">
    <link rel="stylesheet" href="/css/custom.css"> -->

    <!-- Scripts
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <script src="/static/jquery.min.js"></script>
    <script src="/static/semantic.min.js"></script>
    <link rel="stylesheet" href="/static/beagle.css" type="text/css" media="screen" charset="utf-8">

    <!-- <script src="/scripts/api.js"></script>
    <script src="/scripts/app.js"></script> -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
    <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script> -->
    <!-- <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" /> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script> -->

    <!-- <script src="https://unpkg.com/@observablehq/inspector/dist/inspector.js" crossorigin></script>
    <link crossorigin rel="stylesheet" href="https://unpkg.com/@observablehq/inspector@3.2.2/dist/inspector.css"> -->


    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/d3@6"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot@0.1"></script>
    <meta name="google-signin-client_id"
        content="565126014426-fis7623ann950k0i711upje0o5kt3qhp.apps.googleusercontent.com">
    <meta name="google-signin-cookiepolicy" content="single_host_origin">
    <meta name="google-signin-scope" content="profile email">
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot@0.4"></script>

    <link href="/static/jsoneditor.css" rel="stylesheet" type="text/css">
    <script src="/static/jsoneditor.js"></script>
    <script async defer src="/static/json-formatter.umd.js" charset="UTF-8"></script>
    <style>
        .json-formatter-row .json-formatter-string,
        .json-formatter-row .json-formatter-stringifiable {
            color: teal;
            white-space: normal;
            word-wrap: break-word;
        }
    </style>
    <script>
        var defaultfb = {
            apiKey: "AIzaSyCA2SJwPEXnWB9MBJgvNbrCzNydrMctFpc",
            authDomain: "sendildevar.firebaseapp.com",
            databaseURL: "https://wiless.firebaseio.com",
            projectId: "sendildevar",
            storageBucket: "gcrapps",
            messagingSenderId: "554219100937",
            appId: "1:554219100937:web:7e8dc521b4a7e94b23d1d8",
            measurementId: "G-TW4LTM2R0Y"
        };


        function loadfbConfig(src) {

            var jsonresult = fetch("/fbconfig-local.json").then(
                res => {
                    if (!res.ok) {
                        return defaultfb
                    }
                    obj = res.json();
                    return obj;
                });
            return jsonresult;
        }





        window.onload = () => {
            console.log(loadfbConfig("Window Load"));
        }
    </script>


    <style>
        .material-icons.md-dark {
            color: rgb(7, 241, 19);
        }

        .material-icons.md-dark.md-inactive {
            color: rgba(10, 24, 7, 0.5);
        }


        .minicard {
            /* padding: 10px; */
            max-height: 150px;
            background-color: rgba(243, 235, 162, 0.411);
            overflow-y: auto;
        }

        .mdl-card {
            width: auto;
            overflow-y: auto;

            /* background-color: rgba(250, 235, 215, 0.842); */
        }

        div.column,
        div.columns {
            background-color: rgb(219, 209, 195);
            box-shadow: chartreuse;
            min-height: 100px;

            border-radius: 1%;
        }
    </style>


</head>
<!-- https://www.tutorialspoint.com/materialdesignlite/materialdesignlite_grids.htm -->
<!-- https://www.tutorialspoint.com/materialdesignlite/materialdesignlite_layouts.htm -->

<body>

    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header ">
        <header class="mdl-layout__header ">
            <!-- mdl-layout__header--scroll -->
            <div class="mdl-layout__header-row">
                <span class="mdl-layout-title">App Runner </span>

                <div class="material-icons  " style="font-size:2em;padding: 1em;" id="servicehost"> cloud_off
                </div>
                <div class="mdl-layout-spacer"></div>

                <div class="mdl-layout-spacer"></div>

                <nav class="mdl-navigation">
                    <!-- Add MDL Navigation Links here -->

                    <button id="card4menu" class="mdl-button mdl-js-button mdl-button--icon">
                        <i class="material-icons">more_vert</i>
                    </button>
                    <!-- <label for="card4menu" class="mdl-textfield__label">DG Source</label> -->
                    <ul for="card4menu" class="mdl-menu mdl-menu--bottom-right mdl-js-menu">
                        <li class="mdl-menu__item" onclick="openForm()">
                            <span class="mdl-list__item">
                                <i class="material-icons">person</i> Login
                            </span>

                        </li>
                        <li class="mdl-menu__item mdl-menu__item--full-bleed-divider" disabled>
                            <span>Pick Server</span>
                        </li>

                        <li class="mdl-menu__item" data-val="dg1" onclick="selectBot('local')">
                            <label class="mdl-radio mdl-js-radio" for="option1">
                                <input type="radio" id="option1" name="dgsource" class="mdl-radio__button" checked>
                                <span class="mdl-radio__label">Local Machine</span>
                            </label>

                        </li>
                        <li class="mdl-menu__item" data-val="devel" onclick="selectBot('gae')">
                            <label class="mdl-radio mdl-js-radio" for="option2">
                                <input type="radio" id="option2" name="dgsource" class="mdl-radio__button">
                                <span class="mdl-radio__label">Google Server</span>
                            </label>
                        </li>
                    </ul>

                    <div class="material-icons mdl-badge mdl-badge--overlap" data-badge="0" id="jobsid">
                        notifications
                    </div>
                </nav>


            </div>
        </header>
        <div class="mdl-layout__drawer">
            <!-- <img src="static/mark.png" alt=""> -->
            <img src='static/mark2.png' style="background-size: contain;" portrait onclick="switchImage()"
                loading="lazy"> </img>
            <!-- <div class="mdl-list__item-avatar material-icons" style="position: fixed;top: 10px;"> -->
            <img class="profile-pic" src="" hidden alt="Profile Pic">

            <!-- </div> -->


            <span class="mdl-layout-title">
                <div id="username" style="font-size:  0.7em;"> </div>
                <div class="mdl-tooltip" data-mdl-for="username">
                    Provider
                </div>
            </span>

            <nav class="mdl-navigation">
                <a class="mdl-navigation__link " href="#"> <i class="material-icons"> view_quilt </i> Public
                    Results
                </a>
                <a class="mdl-navigation__link " href="#"> <i class="material-icons"> architecture </i> M.2101
                    (live) </a>
                <!-- <a class="mdl-navigation__link" href="">SLS Simulator</a> -->
                <a class="mdl-navigation__link " href="#"> <i class="material-icons"> 5g </i> Cellular
                    (live) </a>
                <a class="mdl-navigation__link " href="#"> <i class="material-icons"> wifi_channel </i>
                    ITU-R Models(live) </a>

                <a class="mdl-navigation__link " href="#jobs" disabled> <i class="material-icons"> work_history </i>
                    Jobs History </a>

                <label class="mdl-navigation__link mdl-button--primary" href="" id="show-dialog">Submit Job</label>
                <!-- <button id="show-dialog" type="button" class="mdl-button">Submit Job</button> -->
            </nav>
        </div>
        <dialog class="mdl-dialog" id="dlgjob" style="width: 70%;max-height: 50%;">
            <h4 class="mdl-dialog__title">Submit Job?</h4>
            <div class="mdl-dialog__content ">
                <div id="informaton">
                    This is sample information about the app and the required configuration
                </div>
                <div id="jobconfiguration" style="display: block;">
                </div>
                <div id="sampleview">
                </div>


                <p> Credit: <a href="https://observablehq.com/@wiless/configuration-editors">Configuration Editors by
                        ssk</a></p>
            </div>
            <div class=" mdl-dialog__actions ">
                <button type="button" class="mdl-button accept">Submit</button>
                <button type="button" class="mdl-button close">Cancel</button>
            </div>
        </dialog>

        <div class="mdl-card mdl-shadow--2dp form-popup" id="myForm" style="background-color: antiquewhite;">

            <h4 class="mdl-dialog__title">Login</h4>
            <!-- <div class="mdl-card__title mdl-card--expand">
                Login
            </div> -->
            <div class="mdl-card__actions mdl-card--border ">
                <div action="">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                        <input class="mdl-textfield__input" type="text" name="email" required autocomplete="username">
                        <label class="mdl-textfield__label" for="email"> Email</label>

                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">

                        <label class="mdl-textfield__label" for="psw">Password</label>
                        <input class="mdl-textfield__input" type="password" autocomplete="current-password"
                            placeholder="Enter Password" name="psw" required>
                    </div>
                    <!-- <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"> -->
                    <!-- <div class="g_id_signin" data-type="standard" data-size="large" data-theme="outline"
                                        data-text="sign_in_with" data-shape="rectangular" data-logo_alignment="left"
                                        id="googlesignin">
                                        Sign In
                                    </div> -->
                    <!-- <button
                                        class="mdl-button mdl-button--raised mdl-button--accent mdl-js-ripple-effect mdl-js-button "
                                        id="googlesignin">Google Signin</button> -->
                    <!-- </div> -->
                    <div>
                        <button
                            class="mdl-button mdl-button--raised mdl-button--accent mdl-js-ripple-effect mdl-js-button "
                            id="submit">Login</button>
                        <button
                            class="mdl-button mdl-button--raised mdl-button--accent mdl-js-ripple-effect mdl-js-button "
                            onclick="closeForm()">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="form-popup" id="myForm"> -->




        <!-- </div> -->



        <main class="mdl-layout__content ">
            <!-- Colored FAB button with ripple -->
            <div style="position:fixed;z-index:9999;right: 25px;bottom: 25px;transform: rotate(0deg);">
                <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"
                    id="addjob">
                    <i class="material-icons">add</i>
                </button>



                <div class="mdl-list mdl-menu mdl-menu--top-right mdl-js-menu mdl-js-ripple-effect" for="addjob">
                    <div class="mdl-list__item mdl-menu__item">
                        <span class="mdl-list__item-primary-content">
                            <i class="material-icons mdl-list__item-icon">cell_tower</i>
                            <span>M.2101</span>
                        </span>
                        <a class="mdl-list__item-secondary-action" href="#"><i class="material-icons">add</i></a>
                    </div>
                    <div class="mdl-list__item mdl-menu__item">
                        <span class="mdl-list__item-primary-content">
                            <i class="material-icons mdl-list__item-icon">5g</i>
                            <span>M.2412 (5G)</span>
                        </span>
                        <!-- <a class="mdl-list__item-secondary-action" href="#"><i class="material-icons">add</i></a> -->
                    </div>
                    <div class="mdl-list__item mdl-menu__item">
                        <span class="mdl-list__item-primary-content">
                            <i class="material-icons mdl-list__item-icon">wifi_channel</i>
                            <span>More..</span>
                        </span>
                        <span class="mdl-list__item-secondary-content">
                            <a class="mdl-list__item-secondary-action" href="#"><i class="material-icons">star</i></a>
                        </span>
                    </div>
                </div>
            </div>

            <!-- <div class="row">
                <div class="one column">One</div>
                <div class="eleven columns">Eleven</div>
            </div> -->

            <div class="mdl-grid container mdl-layout-spacer">
                <!-- CARDS  -->
                <!-- CARD#1 Logged In User Info can be moved to left later  -->


                <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-phone mdl-cell--12-col-tablet  ">
                    <div class="mdl-card mdl-shadow--2dp mdl-card-full">
                        <div class="mdl-card__title">



                        </div>
                        <div class="mdl-card__actions mdl-card--border">
                            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--primary"
                                id="loadjobs">Load Jobs</button>

                        </div>
                        <!-- <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="loadJobs">
                            <i class="material-icons">replay</i>
                        </button> -->

                        <div class="mdl-card__menu">
                            <button id="card1menu" class="mdl-button mdl-js-button mdl-button--icon">
                                <i class="material-icons">info</i>
                            </button>


                            <!-- <button id="card1menu" class="mdl-button mdl-js-button mdl-button--icon">
                                <i class="material-icons">more_vert</i>
                            </button>
                            <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
                                for="card1menu">

                            <li class="mdl-menu__item" onclick="console.log('clicked')">aa</li>
                            <li class="mdl-menu__item">ab</li>
                            </ul> -->
                        </div>


                    </div>

                </div>
                <!-- CARD#2 DEVICE Status   -->
                <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-phone mdl-cell--12-col-tablet ">
                    <div class="mdl-card mdl-shadow--2dp mdl-card-full">
                        <div class="mdl-card__title">
                            Logs & Status
                        </div>
                        <div class="mdl-card__actions mdl-card--border">

                            <div id="jobstatus">
                                <!-- <div id="firebaseui-auth-container"></div> -->
                            </div>

                        </div>

                    </div>
                </div>


                <!-- CARD#3a DEVICE Status   -->
                <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-phone mdl-cell--12-col-tablet">
                    <div class="mdl-card mdl-shadow--2dp mdl-card-full">
                        <div class="mdl-card__title">
                            <span class=" mdl-badge" data-badge="?">List of Jobs</span>
                        </div>
                        <div class="mdl-card__actions mdl-card--border minicard">
                            <div id="joblist" style="margin: auto;"></div>
                            <ul class="mdl-list" id="obsfunctions">
                            </ul>
                        </div>
                        <div class="mdl-card__menu">
                            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="refresh">
                                <i class="material-icons">refresh</i> </button>
                            <div class="mdl-tooltip" data-mdl-for="refresh">
                                Reload Jobs
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CARD#3b DEVICE Status   -->
                <div class="mdl-cell mdl-cell--stretch mdl-cell--3-col mdl-cell--8-col-tablet mdl-cell--12-col-phone">
                    <div class="mdl-card  mdl-shadow--2dp mdl-card-full ">
                        <div class="mdl-card__title ">
                            Output Links : <span id="currentdgsource">Output Files</span>
                        </div>

                        <div class="mdl-card__actions mdl-card--border">

                            <div id="filelist"></div>
                        </div>



                    </div>
                </div>

                <div class="mdl-cell mdl-cell--12-col">
                    <div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
                        <div class="mdl-tabs__tab-bar">
                            <a href="#m2101-panel" class="mdl-tabs__tab ">M.2101</a>
                            <a href="#sls-panel" class="mdl-tabs__tab is-active">SLS Simulator</a>
                            <a href="#dummy-panel" class="mdl-tabs__tab">More..</a>
                        </div>

                        <div class="mdl-tabs__panel " id="m2101-panel">
                            <div class="mdl-card mdl-shadow--2dp">
                                <div class="mdl-card__title">
                                    <h3 class="mdl-card__title-text">M.2101 Configuration</h3>
                                </div>
                                <div class="mdl-card__supporting-text">
                                    <input type="file" id="inputfile" name="inputfile" />
                                    <!-- Accent-colored raised button with ripple -->
                                    <label
                                        class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--primary "
                                        for="inputfile">
                                        <i class="material-icons ">file_open</i>
                                        Pick File
                                    </label>
                                    <span id="filename"> Filename </span>

                                </div>
                                <div class="mdl-card__actions mdl-card--border">
                                    <!-- <label class="mdl-button--primary" for="inputfile">File Pick</label> -->
                                    <!-- <input class="mdl-textfield__input" type="file" name="inputfile" id="inputfile"> -->
                                    <div id="output"> </div>
                                </div>
                                <div class="mdl-card__menu">
                                    <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect"
                                        id="runm2101">
                                        <i class="material-icons">queue_play_next</i>
                                        <!-- <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
                                            <i class="material-icons">run_circle</i>
                                        </button> -->
                                    </button>

                                </div>
                            </div>


                        </div>

                        <div class="mdl-tabs__panel is-active" id="sls-panel">

                            <div class="mdl-card mdl-shadow--2dp">
                                <div class="mdl-card__title">
                                    <h2 class="mdl-card__title-text">SLS</h2>
                                </div>
                                <div class="mdl-card__supporting-text">
                                    Runs a system simulation, with wrap around and M.2412 based channel models
                                </div>
                                <div class="mdl-card__actions mdl-card--border">
                                    <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                                        Load Defaults
                                    </a>

                                    <div class="mdl-grid">
                                        <div class="mdl-cell--4-col-desktop mdl-cell--12-col-tablet mdl-cell--12-col-phone "
                                            style="border-right:1px solid rgba(6, 45, 46, 0.445);">
                                            <input type="file" id="itu-file">
                                            <!-- Accent-colored raised button with ripple -->
                                            <label
                                                class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--primary "
                                                for="itu-file">
                                                <i class="material-icons ">file_open</i>
                                                ITU (json)
                                            </label>
                                            <span>None</span>

                                            <div class="row">

                                                <div id="ituspec" style="height:400px">
                                                </div>
                                                <div id="itu"></div>
                                            </div>
                                        </div>
                                        <div class="mdl-cell--4-col-desktop mdl-cell--12-col-tablet mdl-cell--12-col-phone "
                                            style="border-right:1px solid rgba(6, 45, 46, 0.445);">
                                            <input type="file" id="nr-file">
                                            <label
                                                class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--primary "
                                                for="nr-file">
                                                <i class="material-icons ">file_open</i>
                                                NR (json)
                                            </label>
                                            <span>None</span>


                                            <div class="row">

                                                <div id="nrspec" style="height:400px;">
                                                </div>
                                                <div id="nr"></div>
                                            </div>
                                        </div>
                                        <div class="mdl-cell--4-col-desktop mdl-cell--12-col-tablet mdl-cell--12-col-phone  "
                                            style="border-right:1px solid rgba(6, 45, 46, 0.205);">
                                            <input type="file" id="sim-file">
                                            <label
                                                class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--primary "
                                                for="sim-file">
                                                <i class="material-icons ">file_open</i>
                                                SIM (json)
                                            </label>
                                            <span>None</span>
                                            <div class="row">
                                                <div id="simspec" style="height:400px;">
                                                </div>
                                                <div id="sim"></div>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                                <div class="mdl-card__menu">
                                    <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect"
                                        id="runsls">
                                        <i class="material-icons">queue_play_next</i>
                                        <!-- <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
                                            <i class="material-icons">run_circle</i>
                                        </button> -->
                                    </button>

                                </div>
                            </div>

                        </div>

                        <div class="mdl-tabs__panel" id="dummy-panel">

                            <div class="mdl-card mdl-shadow--2dp">
                                <div class="mdl-card__title">
                                    <h2 class="mdl-card__title-text">Dummy More..</h2>
                                </div>
                                <div class="mdl-card__supporting-text">

                                </div>
                                <div class="mdl-card__actions mdl-card--border">
                                    <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">

                                    </a>
                                </div>
                                <div class="mdl-card__menu">
                                    <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
                                        <i class="material-icons">share</i>
                                    </button>

                                </div>
                            </div>

                        </div>
                    </div>

                </div>

                <div class="mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet " id="plots">
                    <div class="mdl-card mdl-shadow--2dp">
                        <div class="mdl-card__title">
                            <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" id="vegaplot">
                                SINR CDF <i class="material-icons">refresh</i>
                            </a>
                        </div>
                        <div class="mdl-card__actions mdl-card--border">

                            <div id="vis"></div>
                        </div>
                        <div class="mdl-card__menu">
                            <a class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" id="visshare">
                                <i class="material-icons ">file_download</i>
                            </a>

                        </div>
                    </div>
                </div>

                <div class="mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet ">
                    <div class="mdl-card mdl-shadow--2dp">
                        <div class="mdl-card__title ">
                            <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                                id="refreshSamples">
                                NW Layout
                                <i class="material-icons">refresh</i>
                            </a>
                            <!-- <div class="mdl-layout-spacer"></div> -->
                            <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                                id="reloadSamples">
                                Reload
                            </a>
                        </div>
                        <div class="mdl-card__actions mdl-card--border">
                            <div id="nwlayout"></div>
                        </div>
                        <div class="mdl-card__menu">
                            <a class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
                                <i class="material-icons ">file_download</i>
                            </a>
                        </div>

                    </div>
                </div>

                <!-- CARD#4 PLOT   -->
                <div class="mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet ">
                    <div class="mdl-card mdl-shadow--2dp mdl-card-full">
                        <div class="mdl-card__title ">
                            <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" id="reload">
                                UL CDF
                                <i class="material-icons">event</i>
                            </a>
                        </div>
                        <div class="mdl-card__actions mdl-card--border">

                            <div id="plot">

                            </div>
                        </div>
                    </div>
                </div>



                <div class="mdl-snackbar mdl-js-snackbar">

                    <div class="mdl-snackbar__text">
                        aa
                    </div>
                    <!-- <h3></h3> -->
                    <button type="button" class="mdl-snackbar__action"></button>
                </div>
        </main>


    </div>
    <!-- ---  OBSERVABLE  -->





    <script>

        var selectedbot = "";

        function selectBot(params) {

            if (params == "local") {
                wiless.APIhost = "http://localhost:8080"
                document.getElementById("servicehost").innerText = "cloud_off";
            }

            if (params == "gae") {
                wiless.APIhost = "https://wilessapi.appspot.com/"
                document.getElementById("servicehost").innerText = "cloud_sync";
            }

            selectedbot = params;
        }
        var runtime = {};

        function switchImage() {
            document.querySelector("img").toggleAttribute("portrait");
            if (document.querySelector("img").getAttribute("portrait") != null) {
                document.querySelector("img").src = "/static/mark2.png"


            } else {
                document.querySelector("img").src = "/static/mark1.png"
            }

        }


        function displayUserInfo(user) {
            console.log("displayUserInfo() : ", user);
            if (user.photoURL != null) {
                document.querySelector("profile-pic").src = user.photoURL;
            }


            if (user.displayName != null) {
                document.getElementById("username").innerText = user.displayName;
            } else {
                document.getElementById("username").innerText = user.email;
            }

            document.querySelector("#username + div[data-mdl-for='username']").innerHTML = `${user.metadata.lastSignInTime} </br> <i>By  ${user.providerData[0].providerId} </i> </br>
            ${user.uid}`
            user.getIdTokenResult().then(
                d => {
                    // for (const [k, v] of Object.entries(d.claims)) { console.log(k, v) }
                    var key = "slsuser"
                    var enabled = d.claims[key];
                    if (enabled != undefined) {
                        console.log(key, enabled);
                    }

                }
            );

        }



        // var editor = new JSONEditor(document.getElementById('output'), { mode: 'code' });
        function openForm() {
            console.log("Opening login form");
            document.getElementById("myForm").style.display = "block";
        }

        function closeForm() {
            document.getElementById("myForm").style.display = "none";
        }

        document.getElementById('inputfile')
            .addEventListener('change', function (e) {

                var fr = new FileReader();
                var fname = this.files[0].name;
                document.getElementById("filename").innerText = fname; // this.files[0].name;


                fr.onload = function () {
                    el = document.getElementById('output');
                    // el.removeChild(el.lastChild);
                    // el.textContent=fr.result; 

                    try {
                        json = JSON.parse(fr.result);
                        if (!el.firstElementChild) {
                            editor = new JSONEditor(el, { mode: 'view', modes: ['code', 'form', 'text', 'tree', 'view', 'preview'], maxVisibleChilds: 25 }, json);
                        } else {
                            editor.set(jsob)

                        }
                    } catch (e) {
                        document.getElementById("filename").innerText = fname + " Not JSON parsable";
                    }


                    // const editor = new JSONEditor(el, {mode: 'view', modes: ['code', 'form', 'text', 'tree', 'view', 'preview'], maxVisibleChilds: 25 }, json);

                }
                fr.readAsText(this.files[0]);
            });



        $(document).ready(function () {

            window.onload = function () {

                console.log("window.location.href", window.location.href);
                if (window.location.href.startsWith("http://localhost")) {

                    selectBot("local");
                } else {
                    selectBot("gae");
                }
                // if (document.getElementsByClassName('.ui.accordion').length > 0) {
                //     $('.ui.accordion').accordion();
                // }



                //     $('.ui.sidebar')
                //         .sidebar('attach events', '.toc.item')
                //       ;

            };
        });


    </script>

    <script>
        var itueditor, simeditor, nreditor;
        var subscription;
        var globalcounter = 0;
        var slsinfo = {};
        const JFoptions = {
            hoverPreviewEnabled: true,
            hoverPreviewArrayCount: 10,
            hoverPreviewFieldCount: 2,
            // theme: 'dark',
            animateOpen: false,
            animateClose: false,
            useToJSON: true
        };


        document.getElementById('itu-file').addEventListener('change', event => {
            var file = event.target.files[0];
            // document.querySelector("div#tab1-panel > p").innerText = file.name;
            // document.getElementById("filename").innerText = fname; // this.files[0].name;
            // document.querySelector("#itu-file ~ span").innerText = file.name

            file.text().then(d => {
                var obj = JSON.parse(d);

                loadspec("itu", obj, file.name);
                // if (slsinfo[globalcounter] == undefined) {
                //     slsinfo[globalcounter] = { itu: {}, nr: {}, sim: {} };
                // }
                // slsinfo[globalcounter].itu = obj;
                // if (document.getElementById("ituspec").firstElementChild)
                //     document.getElementById("ituspec").firstElementChild.remove();
                // itueditor = new JSONEditor(document.getElementById('ituspec'), { mode: 'code', modes: ['code', 'form', 'text', 'tree', 'view', 'preview'], maxVisibleChilds: 25 }, obj);


            });
        });
        document.getElementById('nr-file').addEventListener('change', event => {
            var file = event.target.files[0];
            // document.querySelector("div#tab2-panel > p").innerText = file.name;
            // document.querySelector("#nr-file ~ span").innerText = file.name

            file.text().then(d => {
                var obj = JSON.parse(d);
                loadspec("nr", obj, file.name);
                // new Inspector(document.querySelector("#nr")).fulfilled(obj);


                // if (slsinfo[globalcounter] == undefined) {
                //     slsinfo[globalcounter] = { itu: {}, nr: {}, sim: {} };
                // }
                // slsinfo[globalcounter].nr = obj;

                // if (document.getElementById("nrspec").firstElementChild)
                //     document.getElementById("nrspec").firstElementChild.remove();
                // simeditor = new JSONEditor(document.getElementById('nrspec'), { mode: 'code', modes: ['code', 'form', 'text', 'tree', 'view', 'preview'], maxVisibleChilds: 25 }, obj);


            });
        });
        document.getElementById('sim-file').addEventListener('change', event => {
            var file = event.target.files[0];
            // document.querySelector("div#tab3-panel > p").innerText = file.name;
            // document.querySelector("#sim-file ~ span").innerText = file.name
            file.text().then(d => {
                var obj = JSON.parse(d);
                // new Inspector(document.querySelector("#sim")).fulfilled(obj);
                loadspec("sim", obj, file.name);
                // if (slsinfo[globalcounter] == undefined) {
                //     slsinfo[globalcounter] = { itu: {}, nr: {}, sim: {} };
                // }
                // slsinfo[globalcounter].sim = obj;
                // if (document.getElementById("simspec").firstElementChild)
                //     document.getElementById("simspec").firstElementChild.remove();
                // simeditor = new JSONEditor(document.getElementById('simspec'), { mode: 'code', modes: ['code', 'form', 'text', 'tree', 'view', 'preview'], maxVisibleChilds: 25 }, obj);

            });
        });

    </script>
    <script type="module">
        // var data = [1, 5, 52, 123];
        // const domContainer = document.querySelector('#like_button_container');
        import { Inspector } from "https://unpkg.com/@observablehq/inspector?module";
        window.Inspector = Inspector;


    </script>
    <script>


        function init() {
            // var start = moment().subtract(29, 'days');
            // function cb(start, end) {
            //     $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
            // }



            // var end = moment();
            //     $("#daterange").daterangepicker({
            //         opens: 'left',
            //         minYear: 2021,
            //         showDropdowns: true,
            //         timePickerIncrement: 30,
            //         ranges: {
            //             'Today': [moment(), moment()],
            //             'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
            //             'Last 7 Days': [moment().subtract(6, 'days'), moment()],
            //             'Last 30 Days': [moment().subtract(29, 'days'), moment()],
            //             'This Month': [moment().startOf('month'), moment().endOf('month')],
            //             'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
            //         },
            //         locale: {
            //             format: 'DD/MMM hh:mm A'
            //         }
            //     }, function (start, end, label) {
            //         console.log("A new date selection was made: " + start.format('DD-MM-YYYY') + ' to ' + end.format('DD-MM-YYYY'));
            //     });
            // });
        };

    </script>


    <script src="/scripts/api.js" async></script>
    <script src="/scripts/app.js" async></script>
    <script src="/scripts/fbapps.js" type="module" async loading="lazy"
        onload="console.log('loading fbapps.js done')"></script>
    <script src="/scripts/plot.js" type="module" async loading="lazy"
        onload="console.log('loading plot.js done')"></script>

</body>

</html>